{
	"info": {
		"_postman_id": "591b5192-3408-4be4-b31a-75d2aa5d523f",
		"name": "payOS OpenAPI Test",
		"description": "# Reference\n\n- [Introduction](https://payos.vn/docs/)\n    \n- [payOS API Reference](https://payos.vn/docs/api/)\n    \n- [payOS SDK](https://payos.vn/docs/sdk/intro/)\n    \n- [payOS Demo](https://github.com/payoshq)\n    \n\n# Getting started\n\n- [Register](https://my.payos.vn/register)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "29698045",
		"_collection_link": "https://www.postman.com/khiemchen/workspace/capoo/collection/29698045-591b5192-3408-4be4-b31a-75d2aa5d523f?action=share&source=collection_link&creator=29698045"
	},
	"item": [
		{
			"name": "Payment requests",
			"item": [
				{
					"name": "Create payment link",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const body = pm.request.body;\r",
									"\r",
									"const checkSum = pm.environment.get('checksum-key');\r",
									"\r",
									"const orderCode = Date.now();\r",
									"pm.environment.set('order-code', orderCode);\r",
									"// set expire in 1 hour\r",
									"const expiredAt = Math.floor(new Date().getTime() / 1000.0) + 3600;\r",
									"\r",
									"const preBody = {\r",
									"    ...body,\r",
									"    raw: {\r",
									"        ...JSON.parse(body.raw),\r",
									"        orderCode,\r",
									"        expiredAt,\r",
									"    }\r",
									"}\r",
									"\r",
									"await utils.createSignatureBrowser(checkSum, {\r",
									"    amount: preBody.raw.amount,\r",
									"    cancelUrl: preBody.raw.cancelUrl,\r",
									"    description: preBody.raw.description,\r",
									"    orderCode: preBody.raw.orderCode,\r",
									"    returnUrl: preBody.raw.returnUrl\r",
									"}, { encodeUri: false }).then((signature) => {\r",
									"    const newBody = {\r",
									"        ...preBody,\r",
									"        raw: {\r",
									"            ...preBody.raw,\r",
									"            signature\r",
									"        }\r",
									"    };\r",
									"    pm.request.body.update(newBody);\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data) {\r",
									"    return;\r",
									"}\r",
									"\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"checksum-key\"), response.data, response.signature, { encodeUri: false });\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);\r",
									"\r",
									"const { bin, amount, accountNumber, accountName, description, paymentLinkId } = response.data;\r",
									"\r",
									"const template = `\r",
									"    <img src=\"https://api.vietqr.io/image/${bin}-${accountNumber}-vietqr_pro.jpg?addInfo=${description}&amount=${amount}&accountName=${accountName}\" alt=\"QR Code Image\" style=\"height: 350\">\r",
									"`;\r",
									"\r",
									"pm.visualizer.set(template, {});\r",
									"\r",
									"pm.environment.set('payment-link-id', paymentLinkId);\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-client-id}}",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{x-api-key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"amount\": 3300,\r\n    \"description\": \"ABC456\",\r\n    \"orderCode\": 0,\r\n    \"cancelUrl\": \"http://localhost\",\r\n    \"returnUrl\": \"http://localhost\",\r\n    \"buyerName\": \"buyer name\",\r\n    \"buyerCompanyName\": \"company name\",\r\n    \"buyerTaxCode\": \"0316794479\",\r\n    \"buyerEmail\": \"buyer@email.com\",\r\n    \"buyerPhone\": \"buyer not provide phone\",\r\n    \"buyerAddress\": \"buyer address\",\r\n    \"items\": [\r\n        {\r\n            \"name\": \"product name\",\r\n            \"quantity\": 1,\r\n            \"price\": 1000,\r\n            \"unit\": \"product unit\",\r\n            \"taxPercentage\": 10\r\n        },\r\n        {\r\n            \"name\": \"product name\",\r\n            \"quantity\": 1,\r\n            \"price\": 2000,\r\n            \"unit\": \"product unit\",\r\n            \"taxPercentage\": 10\r\n        }\r\n    ],\r\n    \"invoice\": {\r\n        \"buyerNotGetInvoice\": false,\r\n        \"taxPercentage\": 10\r\n    },\r\n    \"signature\": \"\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api-merchant-host}}/v2/payment-requests",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v2",
								"payment-requests"
							]
						},
						"description": "Create payment link"
					},
					"response": [
						{
							"name": "Create payment link success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "x-client-id",
										"value": "•••••••",
										"type": "text"
									},
									{
										"key": "x-api-key",
										"value": "•••••••",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"amount\": 20000,\r\n    \"description\": \"ABC456\",\r\n    \"orderCode\": 0,\r\n    \"cancelUrl\": \"http://localhost\",\r\n    \"returnUrl\": \"http://localhost\",\r\n    \"buyerName\": \"buyer name\",\r\n    \"buyerEmail\": \"buyer@email.com\",\r\n    \"buyerPhone\": \"0123456789\",\r\n    \"buyerAddress\": \"buyer address, city, province\",\r\n    \"items\": [\r\n        {\r\n            \"name\": \"product name\",\r\n            \"quantity\": 2,\r\n            \"price\": 10000\r\n        }\r\n    ],\r\n    \"expiredAt\": 1752138068,\r\n    \"signature\": \"\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api-merchant.payos.vn/v2/payment-requests",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v2",
										"payment-requests"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [
								{
									"expires": "Invalid Date",
									"domain": "",
									"path": ""
								}
							],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"bin\": \"970422\",\n        \"accountNumber\": \"113366668888\",\n        \"accountName\": \"QUY VAC XIN PHONG CHONG COVID\",\n        \"amount\": 3000,\n        \"description\": \"VQRIO12546 Thanh toan\",\n        \"orderCode\": 1254,\n        \"currency\": \"VND\",\n        \"paymentLinkId\": \"a7a9454060cd48909864b3747289ff38\",\n        \"status\": \"PENDING\",\n        \"expiredAt\": 1752138068,\n        \"checkoutUrl\": \"https://pay.payos.vn/web/a7a9454060cd48909864b3747289ff38\",\n        \"qrCode\": \"00020101021238570010A00000072701270006970422011371045208946240208QRIBFTTA5303704540430005802VN62180814TT1BQG8F \"\n    },\n    \"signature\": \"8d8640d802576397a1ce45ebda7f835055768ac7ad2e0bfb77f9b8f12cca4c7f\"\n}"
						}
					]
				},
				{
					"name": "Cancel payment link",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data) {\r",
									"    return;\r",
									"}\r",
									"\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"checksum-key\"), response.data, response.signature, { encodeUri: false });\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-client-id}}",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{x-api-key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"cancellationReason\": \"huy thanh toan\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api-merchant-host}}/v2/payment-requests/:payment-link-id/cancel",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v2",
								"payment-requests",
								":payment-link-id",
								"cancel"
							],
							"variable": [
								{
									"key": "payment-link-id",
									"value": "{{payment-link-id}}"
								}
							]
						},
						"description": "Cancel payment link"
					},
					"response": [
						{
							"name": "Cancel payment link",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "x-client-id",
										"value": "•••••••",
										"type": "text"
									},
									{
										"key": "x-api-key",
										"value": "•••••••",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"cancellationReason\":\"huy thanh toan\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api-merchant.payos.vn/v2/payment-requests/:payment-link-id/cancel",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v2",
										"payment-requests",
										":payment-link-id",
										"cancel"
									],
									"variable": [
										{
											"key": "payment-link-id",
											"value": ""
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [
								{
									"expires": "Invalid Date",
									"domain": "",
									"path": ""
								}
							],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"id\": \"f2f82393fdcb456f80a59ad18f776c9a\",\n        \"orderCode\": 1234,\n        \"amount\": 20000,\n        \"amountPaid\": 0,\n        \"amountRemaining\": 20000,\n        \"status\": \"CANCELLED\",\n        \"createdAt\": \"2025-07-10T16:12:58+07:00\",\n        \"transactions\": [],\n        \"canceledAt\": \"2025-07-10T16:16:08+07:00\",\n        \"cancellationReason\": \"huy thanh toan\"\n    },\n    \"signature\": \"f1124b88491ced204e695140e801efd2fd8f68dda88fd6484ab60b61927c9e6c\"\n}"
						}
					]
				},
				{
					"name": "Get payment link information",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data) {\r",
									"    return;\r",
									"}\r",
									"\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"checksum-key\"), response.data, response.signature, { encodeUri: false });\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-client-id}}",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{x-api-key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{api-merchant-host}}/v2/payment-requests/:payment-link-id",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v2",
								"payment-requests",
								":payment-link-id"
							],
							"variable": [
								{
									"key": "payment-link-id",
									"value": "{{payment-link-id}}"
								}
							]
						},
						"description": "Get payment link information"
					},
					"response": [
						{
							"name": "Get payment link information success",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "x-client-id",
										"value": "•••••••",
										"type": "text"
									},
									{
										"key": "x-api-key",
										"value": "•••••••",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api-merchant.payos.vn/v2/payment-requests/:order-code",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v2",
										"payment-requests",
										":order-code"
									],
									"variable": [
										{
											"key": "order-code",
											"value": ""
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"id\": \"ac3d86da25344384a986a09dfa37a122\",\n        \"orderCode\": 1234,\n        \"amount\": 2000,\n        \"amountPaid\": 2000,\n        \"amountRemaining\": 0,\n        \"status\": \"PAID\",\n        \"createdAt\": \"2025-05-30T08:47:44+07:00\",\n        \"transactions\": [\n            {\n                \"accountNumber\": \"0362795100\",\n                \"amount\": 2000,\n                \"counterAccountBankId\": \"01202001\",\n                \"counterAccountBankName\": null,\n                \"counterAccountName\": \"BUI TIEN LOC\",\n                \"counterAccountNumber\": \"6230239822\",\n                \"description\": \"Qacqtb0764  CASSO46 4 gfdwhrQEcYmvKNGVfVIcXA6E 1003 0362795100- Ma GD ACSP Sd054432\",\n                \"reference\": \"FT25150240131288\",\n                \"transactionDateTime\": \"2025-05-30T08:48:21+07:00\",\n                \"virtualAccountName\": null,\n                \"virtualAccountNumber\": null\n            }\n        ],\n        \"canceledAt\": null,\n        \"cancellationReason\": null\n    },\n    \"signature\": \"e17e5d1e918f08136213d6224179f417c8f6ca23837d834469cb523bd5b7fcaa\"\n}"
						}
					]
				},
				{
					"name": "Confirm webhook URL",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-client-id}}",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{x-api-key}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \"webhookUrl\": \"https://your-company.com/payment-hook\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api-merchant-host}}/confirm-webhook",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"confirm-webhook"
							]
						},
						"description": "Confirm webhook URL"
					},
					"response": [
						{
							"name": "Confirm webhook URL",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "x-client-id",
										"value": "•••••••",
										"type": "text"
									},
									{
										"key": "x-api-key",
										"value": "•••••••",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n   \"webhookUrl\": \"https://your-company.com/payment-hook\"\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api-merchant.payos.vn/confirm-webhook",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"confirm-webhook"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [
								{
									"expires": "Invalid Date",
									"domain": "",
									"path": ""
								}
							],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"webhookUrl\": \"https://your-company.com/payment-hook\",\n        \"accountName\": \"NGUYEN VAN A\",\n        \"accountNumber\": \"0123456789\",\n        \"name\": \"payment gateway name\",\n        \"shortName\": \"bank short name\"\n    }\n}"
						}
					]
				},
				{
					"name": "Get payment link invoices",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data) {\r",
									"    return;\r",
									"}\r",
									"\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"checksum-key\"), response.data, response.signature, { encodeUri: false });\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);\r",
									"\r",
									"if (response.data.invoices.length > 0) {\r",
									"    pm.environment.set('invoice-id', response.data.invoices[0].invoiceId);\r",
									"}"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-client-id}}"
							},
							{
								"key": "x-api-key",
								"value": "{{x-api-key}}"
							}
						],
						"url": {
							"raw": "{{api-merchant-host}}/v2/payment-requests/:payment-link-id/invoices",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v2",
								"payment-requests",
								":payment-link-id",
								"invoices"
							],
							"variable": [
								{
									"key": "payment-link-id",
									"value": "{{payment-link-id}}"
								}
							]
						},
						"description": "Get payment link invoices"
					},
					"response": [
						{
							"name": "Get payment link invoice",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "x-client-id",
										"value": "{{x-client-id}}"
									},
									{
										"key": "x-api-key",
										"value": "{{x-api-key}}"
									}
								],
								"url": {
									"raw": "{{api-merchant-host}}/v2/payment-requests/:payment-link-id/invoice",
									"host": [
										"{{api-merchant-host}}"
									],
									"path": [
										"v2",
										"payment-requests",
										":payment-link-id",
										"invoice"
									],
									"variable": [
										{
											"key": "payment-link-id",
											"value": "{{payment-link-id}}"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"invoices\": [\n            {\n                \"invoiceId\": \"373m5a88-5131-429c-8863-6ee98g1d3fa8\",\n                \"invoiceNumber\": \"00001243\",\n                \"issuedTimestamp\": 1754010756316,\n                \"issuedDatetime\": \"2025-08-01T08:12:36+07:00\",\n                \"transactionId\": null,\n                \"reservationCode\": null,\n                \"codeOfTax\": null\n            },\n            {\n                \"invoiceId\": \"9c20k83c-f647-4a47-9a42-0cd3cb715429\",\n                \"invoiceNumber\": \"C25MKS28\",\n                \"issuedTimestamp\": 1754010762038,\n                \"issuedDatetime\": \"2025-08-01T08:12:42+07:00\",\n                \"transactionId\": null,\n                \"reservationCode\": \"KVI0N53DSZ2MDEL\",\n                \"codeOfTax\": \"M1-25-C9OTC-93040291537\"\n            }\n        ]\n    },\n    \"signature\": \"5e2fef4cc3f98430a9a48c12adc28a52ebe2ee92427deff855980e4a861c97d1\"\n}"
						}
					]
				},
				{
					"name": "Download payment link invoice",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-client-id}}"
							},
							{
								"key": "x-api-key",
								"value": "{{x-api-key}}"
							}
						],
						"url": {
							"raw": "{{api-merchant-host}}/v2/payment-requests/:payment-link-id/invoices/:invoiceId/download",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v2",
								"payment-requests",
								":payment-link-id",
								"invoices",
								":invoiceId",
								"download"
							],
							"variable": [
								{
									"key": "payment-link-id",
									"value": "{{payment-link-id}}"
								},
								{
									"key": "invoiceId",
									"value": "{{invoice-id}}"
								}
							]
						},
						"description": "Download payment link invoice"
					},
					"response": []
				}
			]
		},
		{
			"name": "Payouts",
			"item": [
				{
					"name": "Batch payouts",
					"item": [
						{
							"name": "Create batch payout",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"const response = pm.response.json();\r",
											"if (!response.data || response.code !== '00') {\r",
											"    return;\r",
											"}\r",
											"\r",
											"const { id } = response.data;\r",
											"pm.environment.set('payout-id', id);\r",
											"\r",
											"const signature = pm.response.headers.get(\"x-signature\");\r",
											"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"payout-checksum-key\"), response.data, signature);\r",
											"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);"
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"exec": [
											"const body = pm.request.body;\r",
											"\r",
											"const checkSum = pm.environment.get('payout-checksum-key');\r",
											"\r",
											"const referenceId = `payout_${Date.now()}`;\r",
											"pm.environment.set('payout-reference-id', referenceId);\r",
											"\r",
											"const parseBody = JSON.parse(body.raw);\r",
											"const preBody = {\r",
											"    ...body,\r",
											"    raw: {\r",
											"        ...parseBody,\r",
											"        referenceId,\r",
											"        payouts: [\r",
											"            ...parseBody.payouts.map((item, index) => ({\r",
											"                ...item,\r",
											"                referenceId: `${referenceId}_${index}`\r",
											"            }))\r",
											"        ]\r",
											"    }\r",
											"}\r",
											"\r",
											"await utils.createSignatureBrowser(checkSum, preBody.raw).then(signature => {\r",
											"    pm.request.headers.upsert({\r",
											"        key: 'x-signature',\r",
											"        value: signature\r",
											"    });\r",
											"    pm.request.headers.upsert({\r",
											"        key: 'x-idempotency-key',\r",
											"        value: crypto.randomUUID()\r",
											"    });\r",
											"    pm.request.body.update(preBody);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "x-idempotency-key",
										"value": ""
									},
									{
										"key": "x-client-id",
										"value": "{{x-payout-client-id}}"
									},
									{
										"key": "x-api-key",
										"value": "{{x-payout-api-key}}"
									},
									{
										"key": "x-signature",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"referenceId\": \"\",\r\n    \"category\": [\r\n        \"salary\"\r\n    ],\r\n    \"validateDestination\": true,\r\n    \"payouts\": [\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970422\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970422\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970422\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        }\r\n    ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{api-merchant-host}}/v1/payouts/batch",
									"host": [
										"{{api-merchant-host}}"
									],
									"path": [
										"v1",
										"payouts",
										"batch"
									]
								},
								"description": "Create batch payout"
							},
							"response": [
								{
									"name": "Create batch payout success",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "x-idempotency-key",
												"value": ""
											},
											{
												"key": "x-client-id",
												"value": "•••••••"
											},
											{
												"key": "x-api-key",
												"value": "•••••••"
											},
											{
												"key": "x-signature",
												"value": ""
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"referenceId\": \"\",\r\n    \"category\": [\r\n        \"salary\"\r\n    ],\r\n    \"validateDestination\": true,\r\n    \"payouts\": [\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970422\",\r\n            \"toAccountNumber\": \"0969885457\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970422\",\r\n            \"toAccountNumber\": \"0969885457\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970422\",\r\n            \"toAccountNumber\": \"0969885457\"\r\n        }\r\n    ]\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://api-merchant.payos.vn/v1/payouts/batch",
											"protocol": "https",
											"host": [
												"api-merchant",
												"payos",
												"vn"
											],
											"path": [
												"v1",
												"payouts",
												"batch"
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "x-signature",
											"value": "",
											"description": "",
											"type": "text"
										}
									],
									"cookie": [
										{
											"expires": "Invalid Date",
											"domain": "",
											"path": ""
										}
									],
									"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"id\": \"batch_207b1323476b46af9fcd33a079326549\",\n        \"referenceId\": \"payout_1752139646119\",\n        \"transactions\": [\n            {\n                \"id\": \"batch_txn_55408282f2764e859b787827b34fe040\",\n                \"referenceId\": \"payout_1752139646119_0\",\n                \"amount\": 2000,\n                \"description\": \"batch payout\",\n                \"toBin\": \"970422\",\n                \"toAccountNumber\": \"0969885457\",\n                \"toAccountName\": null,\n                \"reference\": null,\n                \"transactionDatetime\": null,\n                \"errorMessage\": null,\n                \"errorCode\": null,\n                \"state\": \"RECEIVED\"\n            },\n            {\n                \"id\": \"batch_txn_4a727079fad4420d85cca5c228356971\",\n                \"referenceId\": \"payout_1752139646119_1\",\n                \"amount\": 2000,\n                \"description\": \"batch payout\",\n                \"toBin\": \"970422\",\n                \"toAccountNumber\": \"0969885457\",\n                \"toAccountName\": null,\n                \"reference\": null,\n                \"transactionDatetime\": null,\n                \"errorMessage\": null,\n                \"errorCode\": null,\n                \"state\": \"RECEIVED\"\n            },\n            {\n                \"id\": \"batch_txn_f3272fe019ed46f0961d064650b94e5f\",\n                \"referenceId\": \"payout_1752139646119_2\",\n                \"amount\": 2000,\n                \"description\": \"batch payout\",\n                \"toBin\": \"970422\",\n                \"toAccountNumber\": \"0969885457\",\n                \"toAccountName\": null,\n                \"reference\": null,\n                \"transactionDatetime\": null,\n                \"errorMessage\": null,\n                \"errorCode\": null,\n                \"state\": \"RECEIVED\"\n            }\n        ],\n        \"category\": [\n            \"salary\"\n        ],\n        \"approvalState\": \"SCHEDULED\",\n        \"createdAt\": \"2025-07-10T16:27:26+07:00\"\n    }\n}"
								}
							]
						}
					]
				},
				{
					"name": "Create payout",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const body = pm.request.body;\r",
									"\r",
									"const checkSum = pm.environment.get('payout-checksum-key');\r",
									"\r",
									"const referenceId = `payout_${Date.now()}`;\r",
									"pm.environment.set('payout-reference-id', referenceId);\r",
									"\r",
									"const preBody = {\r",
									"    ...body,\r",
									"    raw: {\r",
									"        ...JSON.parse(body.raw),\r",
									"        referenceId,\r",
									"    }\r",
									"}\r",
									"\r",
									"await utils.createSignatureBrowser(checkSum, preBody.raw).then(signature => {\r",
									"    pm.request.headers.upsert({\r",
									"        key: 'x-signature',\r",
									"        value: signature\r",
									"    });\r",
									"    pm.request.headers.upsert({\r",
									"        key: 'x-idempotency-key',\r",
									"        value: crypto.randomUUID()\r",
									"    });\r",
									"    pm.request.body.update(preBody);\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data || response.code !== '00') {\r",
									"    return;\r",
									"}\r",
									"\r",
									"const { id } = response.data;\r",
									"pm.environment.set('payout-id', id);\r",
									"\r",
									"const signature = pm.response.headers.get(\"x-signature\");\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"payout-checksum-key\"), response.data, signature);\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-idempotency-key",
								"value": ""
							},
							{
								"key": "x-client-id",
								"value": "{{x-payout-client-id}}"
							},
							{
								"key": "x-api-key",
								"value": "{{x-payout-api-key}}"
							},
							{
								"key": "x-signature",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"referenceId\": \"\",\r\n    \"amount\": 2000,\r\n    \"description\": \"payout\",\r\n    \"toBin\": \"970422\",\r\n    \"toAccountNumber\": \"0123456789\",\r\n    \"category\": [\r\n        \"salary\",\r\n        \"hoa\"\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api-merchant-host}}/v1/payouts",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v1",
								"payouts"
							]
						},
						"description": "Create payout"
					},
					"response": [
						{
							"name": "Create payout success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "x-idempotency-key",
										"value": ""
									},
									{
										"key": "x-client-id",
										"value": "•••••••"
									},
									{
										"key": "x-api-key",
										"value": "•••••••"
									},
									{
										"key": "x-signature",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"referenceId\": \"\",\r\n    \"amount\": 200000,\r\n    \"description\": \"payout\",\r\n    \"toBin\": \"970422\",\r\n    \"toAccountNumber\": \"0969885457\",\r\n    \"category\": [\r\n        \"salary\", \"hoa\"\r\n    ]\r\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api-merchant.payos.vn/v1/payouts",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v1",
										"payouts"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "x-signature",
									"value": "",
									"description": "",
									"type": "text"
								}
							],
							"cookie": [
								{
									"expires": "Invalid Date",
									"domain": "",
									"path": ""
								}
							],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"id\": \"batch_bc8707d2421545279056a5e4e54372ab\",\n        \"referenceId\": \"payout_1752139775150\",\n        \"transactions\": [\n            {\n                \"id\": \"batch_txn_bf89c7ca8a4e4ff7a0c4de69719e14a4\",\n                \"referenceId\": \"payout_1752139775150\",\n                \"amount\": 200000,\n                \"description\": \"payout\",\n                \"toBin\": \"970422\",\n                \"toAccountNumber\": \"0969885457\",\n                \"toAccountName\": \"NGUYEN VAN A\",\n                \"reference\": \"262038\",\n                \"transactionDatetime\": \"2025-07-10T16:29:42+07:00\",\n                \"errorMessage\": null,\n                \"errorCode\": null,\n                \"state\": \"SUCCEEDED\"\n            }\n        ],\n        \"category\": [\n            \"salary\",\n            \"hoa\"\n        ],\n        \"approvalState\": \"COMPLETED\",\n        \"createdAt\": \"2025-07-10T16:29:37+07:00\"\n    }\n}"
						}
					]
				},
				{
					"name": "Get payout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data) {\r",
									"    return;\r",
									"}\r",
									"const signature = pm.response.headers.get(\"x-signature\");\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"payout-checksum-key\"), response.data, signature);\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-payout-client-id}}",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{x-payout-api-key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{api-merchant-host}}/v1/payouts/:payoutId",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v1",
								"payouts",
								":payoutId"
							],
							"variable": [
								{
									"key": "payoutId",
									"value": "{{payout-id}}"
								}
							]
						},
						"description": "Get payout"
					},
					"response": [
						{
							"name": "Get payout success",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "x-client-id",
										"value": "•••••••",
										"type": "text"
									},
									{
										"key": "x-api-key",
										"value": "•••••••",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api-merchant.payos.vn/v1/payouts/:payoutId",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v1",
										"payouts",
										":payoutId"
									],
									"variable": [
										{
											"key": "payoutId",
											"value": ""
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "x-signature",
									"value": "",
									"description": "",
									"type": "text"
								}
							],
							"cookie": [
								{
									"expires": "Invalid Date",
									"domain": "",
									"path": ""
								}
							],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"id\": \"batch_bc8707d2421545279056a5e4e54372ab\",\n        \"referenceId\": \"payout_1752139775150\",\n        \"transactions\": [\n            {\n                \"id\": \"batch_txn_bf89c7ca8a4e4ff7a0c4de69719e14a4\",\n                \"referenceId\": \"payout_1752139775150\",\n                \"amount\": 200000,\n                \"description\": \"payout\",\n                \"toBin\": \"970422\",\n                \"toAccountNumber\": \"0969885457\",\n                \"toAccountName\": \"NGUYEN VAN A\",\n                \"reference\": \"262038\",\n                \"transactionDatetime\": \"2025-07-10T16:29:42+07:00\",\n                \"errorMessage\": null,\n                \"errorCode\": null,\n                \"state\": \"SUCCEEDED\"\n            }\n        ],\n        \"category\": [\n            \"salary\",\n            \"hoa\"\n        ],\n        \"approvalState\": \"COMPLETED\",\n        \"createdAt\": \"2025-07-10T16:29:37+07:00\"\n    }\n}"
						}
					]
				},
				{
					"name": "Get list payout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data) {\r",
									"    return;\r",
									"}\r",
									"const signature = pm.response.headers.get(\"x-signature\");\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"payout-checksum-key\"), response.data, signature);\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-payout-client-id}}",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{x-payout-api-key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{api-merchant-host}}/v1/payouts?limit=10&offset=0&referenceId=payout_1752139775150&approvalState=COMPLETED&category=salary,hoa&fromDate=2025-07-21T08:35:34+07:00&toDate=2025-07-22T08:35:34+07:00",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v1",
								"payouts"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "offset",
									"value": "0"
								},
								{
									"key": "referenceId",
									"value": "payout_1752139775150"
								},
								{
									"key": "approvalState",
									"value": "COMPLETED"
								},
								{
									"key": "category",
									"value": "salary,hoa"
								},
								{
									"key": "fromDate",
									"value": "2025-07-21T08:35:34+07:00"
								},
								{
									"key": "toDate",
									"value": "2025-07-22T08:35:34+07:00"
								}
							]
						},
						"description": "Get payout"
					},
					"response": [
						{
							"name": "Get list payout success",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "x-client-id",
										"value": "•••••••",
										"type": "text"
									},
									{
										"key": "x-api-key",
										"value": "•••••••",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api-merchant.payos.vn/v1/payouts?limit=10&offset=0&referenceId=payout_1752139775150&approvalState=SUCCEEDED&category=salary&fromDate=2025-06-12T11:24:55Z&toDate=2025-08-12T11:24:55Z",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v1",
										"payouts"
									],
									"query": [
										{
											"key": "limit",
											"value": "10"
										},
										{
											"key": "offset",
											"value": "0"
										},
										{
											"key": "referenceId",
											"value": "payout_1752139775150"
										},
										{
											"key": "approvalState",
											"value": "SUCCEEDED"
										},
										{
											"key": "category",
											"value": "salary"
										},
										{
											"key": "fromDate",
											"value": "2025-06-12T11:24:55Z"
										},
										{
											"key": "toDate",
											"value": "2025-08-12T11:24:55Z"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "x-signature",
									"value": "",
									"description": "",
									"type": "text"
								}
							],
							"cookie": [
								{
									"expires": "Invalid Date",
									"domain": "",
									"path": ""
								}
							],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"payouts\": [\n            {\n                \"id\": \"batch_bc8707d2421545279056a5e4e54372ab\",\n                \"referenceId\": \"payout_1752139775150\",\n                \"transactions\": [\n                    {\n                        \"id\": \"batch_txn_bf89c7ca8a4e4ff7a0c4de69719e14a4\",\n                        \"referenceId\": \"payout_1752139775150\",\n                        \"amount\": 200000,\n                        \"description\": \"payout\",\n                        \"toBin\": \"970422\",\n                        \"toAccountNumber\": \"0969885457\",\n                        \"toAccountName\": \"NGUYEN VAN A\",\n                        \"reference\": \"262038\",\n                        \"transactionDatetime\": \"2025-07-10T16:29:42+07:00\",\n                        \"errorMessage\": null,\n                        \"errorCode\": null,\n                        \"state\": \"SUCCEEDED\"\n                    }\n                ],\n                \"category\": [\n                    \"salary\",\n                    \"hoa\"\n                ],\n                \"approvalState\": \"COMPLETED\",\n                \"createdAt\": \"2025-07-10T16:29:37+07:00\"\n            }\n        ],\n        \"pagination\": {\n            \"limit\": 10,\n            \"offset\": 0,\n            \"total\": 1,\n            \"count\": 1,\n            \"hasMore\": false\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Get balance",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();\r",
									"if (!response.data) {\r",
									"    return;\r",
									"}\r",
									"const signature = pm.response.headers.get(\"x-signature\");\r",
									"const valid = await utils.verifySignatureBrowser(pm.environment.get(\"payout-checksum-key\"), response.data, signature);\r",
									"pm.test(\"Verified signature\", () => pm.expect(valid).to.be.true);"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-payout-client-id}}",
								"type": "text"
							},
							{
								"key": "x-api-key",
								"value": "{{x-payout-api-key}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{api-merchant-host}}/v1/payouts-account/balance",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v1",
								"payouts-account",
								"balance"
							]
						},
						"description": "Get balance"
					},
					"response": [
						{
							"name": "Get balance success",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "x-client-id",
										"value": "•••••••",
										"type": "text"
									},
									{
										"key": "x-api-key",
										"value": "•••••••",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api-merchant.payos.vn/v1/payouts-account/balance",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v1",
										"payouts-account",
										"balance"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "x-signature",
									"value": "",
									"description": "",
									"type": "text"
								}
							],
							"cookie": [],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"accountNumber\": \"84850000116\",\n        \"accountName\": \"NGUYEN VAN A\",\n        \"currency\": \"VND\",\n        \"balance\": \"1992644999\"\n    }\n}"
						}
					]
				},
				{
					"name": "Estimate credit",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const body = pm.request.body;\r",
									"\r",
									"const checkSum = pm.environment.get('payout-checksum-key');\r",
									"\r",
									"const referenceId = `payout_${Date.now()}`;\r",
									"pm.environment.set('payout-reference-id', referenceId);\r",
									"\r",
									"const parseBody = JSON.parse(body.raw);\r",
									"const preBody = {\r",
									"    ...body,\r",
									"    raw: {\r",
									"        ...parseBody,\r",
									"        referenceId,\r",
									"        payouts: [\r",
									"            ...parseBody.payouts.map((item, index) => ({\r",
									"                ...item,\r",
									"                referenceId: `${referenceId}_${index}`\r",
									"            }))\r",
									"        ]\r",
									"    }\r",
									"}\r",
									"\r",
									"await utils.createSignatureBrowser(checkSum, preBody.raw).then(signature => {\r",
									"    pm.request.headers.upsert({\r",
									"        key: 'x-signature',\r",
									"        value: signature\r",
									"    });\r",
									"    pm.request.headers.upsert({\r",
									"        key: 'x-idempotency-key',\r",
									"        value: crypto.randomUUID()\r",
									"    });\r",
									"    pm.request.body.update(preBody);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "x-client-id",
								"value": "{{x-payout-client-id}}"
							},
							{
								"key": "x-api-key",
								"value": "{{x-payout-api-key}}"
							},
							{
								"key": "x-signature",
								"value": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"referenceId\": \"\",\r\n    \"category\": [\r\n        \"salary\"\r\n    ],\r\n    \"validateDestination\": true,\r\n    \"payouts\": [\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"0123456789\"\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api-merchant-host}}/v1/payouts/estimate-credit",
							"host": [
								"{{api-merchant-host}}"
							],
							"path": [
								"v1",
								"payouts",
								"estimate-credit"
							]
						},
						"description": "Estimate credit"
					},
					"response": [
						{
							"name": "Estimate credit success",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "x-idempotency-key",
										"value": ""
									},
									{
										"key": "x-client-id",
										"value": "•••••••"
									},
									{
										"key": "x-api-key",
										"value": "•••••••"
									},
									{
										"key": "x-signature",
										"value": ""
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"referenceId\": \"\",\r\n    \"category\": [\r\n        \"salary\"\r\n    ],\r\n    \"validateDestination\": true,\r\n    \"payouts\": [\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        },\r\n        {\r\n            \"referenceId\": \"\",\r\n            \"amount\": 2000,\r\n            \"description\": \"batch payout\",\r\n            \"toBin\": \"970418\",\r\n            \"toAccountNumber\": \"6230239822\"\r\n        }\r\n    ]\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://api-merchant.payos.vn/v1/payouts/estimate-credit",
									"protocol": "https",
									"host": [
										"api-merchant",
										"payos",
										"vn"
									],
									"path": [
										"v1",
										"payouts",
										"estimate-credit"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [],
							"cookie": [],
							"body": "{\n    \"code\": \"00\",\n    \"desc\": \"success\",\n    \"data\": {\n        \"estimateCredit\": 71100\n    }\n}"
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"/**\r",
					" * Deep sort object with optional array sorting\r",
					" * @param obj Object data\r",
					" * @param sortArrays Whether to sort arrays or maintain their order\r",
					" * @returns Sorted object data\r",
					" */\r",
					"function deepSortObj(obj, sortArrays = false) {\r",
					"    return Object.keys(obj)\r",
					"        .sort()\r",
					"        .reduce((acc, key) => {\r",
					"            const value = obj[key];\r",
					"\r",
					"            if (Array.isArray(value)) {\r",
					"                if (sortArrays) {\r",
					"                    // Sort array elements\r",
					"                    acc[key] = value\r",
					"                        .map((item) => (typeof item === 'object' && item !== null ? deepSortObj(item, sortArrays) : item))\r",
					"                        .sort((a, b) => {\r",
					"                            // Sort primitive values\r",
					"                            if (typeof a !== 'object' && typeof b !== 'object') {\r",
					"                                return String(a).localeCompare(String(b));\r",
					"                            }\r",
					"                            // For objects, sort by JSON string representation\r",
					"                            return JSON.stringify(a).localeCompare(JSON.stringify(b));\r",
					"                        });\r",
					"                } else {\r",
					"                    // Maintain array order, but sort objects within arrays\r",
					"                    acc[key] = value.map((item) =>\r",
					"                        typeof item === 'object' && item !== null ? deepSortObj(item, sortArrays) : item\r",
					"                    );\r",
					"                }\r",
					"            } else if (typeof value === 'object' && value !== null) {\r",
					"                acc[key] = deepSortObj(value, sortArrays);\r",
					"            } else {\r",
					"                acc[key] = value;\r",
					"            }\r",
					"\r",
					"            return acc;\r",
					"        }, {});\r",
					"}\r",
					"\r",
					"/**\r",
					" * Create HMAC signature using Web Crypto API (browser-compatible)\r",
					" *\r",
					" * @param {string} secretKey - Secret key for HMAC signature generation\r",
					" * @param {object} jsonData - JSON object data to be signed\r",
					" * @param {object} options - Configuration options\r",
					" * @param {boolean} options.encodeUri - Whether to URL encode keys and values (default: true)\r",
					" * @param {boolean} options.sortArrays - Whether to sort array elements (default: false)\r",
					" * @param {string} options.algorithm - HMAC algorithm: 'SHA-256', 'SHA-1', 'SHA-512' (default: 'SHA-256')\r",
					" * @returns {Promise<string>} HMAC signature in hexadecimal format\r",
					" *\r",
					" * @example\r",
					" * // Basic usage\r",
					" * const signature = await createSignatureBrowser('secret', { name: 'John', age: 30 });\r",
					" *\r",
					" * // In Postman Pre-request Script:\r",
					" * createSignatureBrowser(pm.environment.get(\"SECRET_KEY\"), pm.request.body.raw).then(signature => {\r",
					" *   pm.request.headers.add({ key: \"x-signature\", value: signature });\r",
					" * });\r",
					" */\r",
					"async function createSignatureBrowser(secretKey, jsonData, options = {}) {\r",
					"    const { encodeUri = true, sortArrays = false, algorithm = 'SHA-256' } = options;\r",
					"\r",
					"    const sortedData = deepSortObj(jsonData, sortArrays);\r",
					"\r",
					"    const queryString = Object.keys(sortedData)\r",
					"        .map((key) => {\r",
					"            let value = sortedData[key];\r",
					"\r",
					"            // Handle arrays by JSON stringify them\r",
					"            if (Array.isArray(value)) {\r",
					"                value = JSON.stringify(value);\r",
					"            }\r",
					"            // Handle nested objects\r",
					"            if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\r",
					"                value = JSON.stringify(value);\r",
					"            }\r",
					"            // Handle null/undefined values\r",
					"            if (value === null || value === undefined) {\r",
					"                value = '';\r",
					"            }\r",
					"\r",
					"            // Conditionally URL encode the key and value based on options\r",
					"            if (encodeUri) {\r",
					"                return `${encodeURIComponent(key)}=${encodeURIComponent(String(value))}`;\r",
					"            }\r",
					"            return `${key}=${value}`;\r",
					"        })\r",
					"        .join('&');\r",
					"\r",
					"    // Web Crypto API implementation\r",
					"    const encoder = new TextEncoder();\r",
					"    const keyData = encoder.encode(secretKey);\r",
					"    const messageData = encoder.encode(queryString);\r",
					"\r",
					"    const cryptoKey = await crypto.subtle.importKey('raw', keyData, { name: 'HMAC', hash: algorithm }, false, ['sign']);\r",
					"\r",
					"    const signature = await crypto.subtle.sign('HMAC', cryptoKey, messageData);\r",
					"    const hashArray = Array.from(new Uint8Array(signature));\r",
					"    const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\r",
					"\r",
					"    return hashHex;\r",
					"}\r",
					"\r",
					"/**\r",
					" * Verify signature using Web Crypto API\r",
					" *\r",
					" * @param {string} secretKey - Secret key used for signature generation\r",
					" * @param {object} jsonData - JSON object data that was signed\r",
					" * @param {string} expectedSignature - Expected signature to verify against\r",
					" * @param {object} options - Configuration options (same as createSignatureBrowser)\r",
					" * @returns {Promise<boolean>} true if signatures match, false otherwise\r",
					" */\r",
					"async function verifySignatureBrowser(secretKey, jsonData, expectedSignature, options = {}) {\r",
					"    const computedSignature = await createSignatureBrowser(secretKey, jsonData, options);\r",
					"    return computedSignature.toLowerCase() === expectedSignature.toLowerCase();\r",
					"}\r",
					"\r",
					"// Example usage for Postman Pre-request Script:\r",
					"/*\r",
					"// Set your secret key in environment variables\r",
					"const secretKey = pm.environment.get(\"SECRET_KEY\");\r",
					"\r",
					"// Get request body (assuming JSON)\r",
					"const requestBody = JSON.parse(pm.request.body.raw || \"{}\");\r",
					"\r",
					"// Create signature\r",
					"createSignatureBrowser(secretKey, requestBody, {\r",
					"  encodeUri: true,\r",
					"  sortArrays: false,\r",
					"  algorithm: 'SHA-256'\r",
					"}).then(signature => {\r",
					"  // Add signature to request headers\r",
					"  pm.request.headers.add({\r",
					"    key: \"x-signature\",\r",
					"    value: signature\r",
					"  });\r",
					"  \r",
					"  console.log(\"Generated signature:\", signature);\r",
					"}).catch(error => {\r",
					"  console.error(\"Error generating signature:\", error);\r",
					"});\r",
					"*/\r",
					"\r",
					"utils = {\r",
					"    createSignatureBrowser,\r",
					"    verifySignatureBrowser,\r",
					"};"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	]
}